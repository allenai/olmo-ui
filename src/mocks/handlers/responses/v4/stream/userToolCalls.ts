import type { StreamingMessageResponse } from '@/contexts/stream-types';

import { USER_TOOL_CALL_ID, USER_TOOL_CALLS_THREAD_ROOT_ID } from '../userToolCallsResponse';

const USER_TOOL_CALLS_RESPONSE_ID = 'msg_';

export const userToolCallsStreamResponse = [
    {
        message: USER_TOOL_CALLS_THREAD_ROOT_ID,
        type: 'start',
    },
    {
        id: USER_TOOL_CALLS_THREAD_ROOT_ID,
        messages: [
            {
                id: USER_TOOL_CALLS_THREAD_ROOT_ID,
                content: 'What is the weather in Seattle?',
                creator: 'google-oauth2|106113864953374894702',
                role: 'user',
                opts: {
                    maxTokens: 2048,
                    temperature: 0.7,
                    n: 1,
                    topP: 1.0,
                    logprobs: null,
                    stop: [],
                },
                toolDefinitions: [
                    {
                        toolName: 'getWeather',
                        description: 'gets the weather for a requested city',
                        parameters: {
                            type: 'object',
                            properties: {
                                city: {
                                    type: 'string',
                                },
                            },
                        },
                        toolSource: 'user_defined',
                    },
                ],
                root: USER_TOOL_CALLS_THREAD_ROOT_ID,
                created: '2025-08-15T22:29:57.951706+00:00',
                modelId: 'qwen3-openai',
                modelHost: 'modal_openai',
                deleted: null,
                parent: null,
                template: null,
                children: ['msg_userToolCall-Assistant-ToolCall'],
                completion: null,
                final: false,
                original: null,
                private: false,
                modelType: null,
                finishReason: null,
                harmful: false,
                expirationTime: null,
                labels: [],
                fileUrls: [],
                thinking: null,
                snippet: 'What is the weather in Seattle?',
                isLimitReached: false,
                isOlderThan30Days: false,
            },
            {
                id: 'msg_userToolCall-Assistant-ToolCall',
                content: '',
                creator: 'google-oauth2|106113864953374894702',
                role: 'assistant',
                opts: {
                    maxTokens: 2048,
                    temperature: 0.7,
                    n: 1,
                    topP: 1.0,
                    logprobs: null,
                    stop: [],
                },
                root: USER_TOOL_CALLS_THREAD_ROOT_ID,
                created: '2025-08-15T22:29:57.973314+00:00',
                modelId: 'qwen3-openai',
                modelHost: 'modal_openai',
                deleted: null,
                parent: USER_TOOL_CALLS_THREAD_ROOT_ID,
                template: null,
                children: null,
                completion: null,
                final: false,
                original: null,
                private: false,
                modelType: 'chat',
                finishReason: null,
                harmful: null,
                expirationTime: null,
                labels: [],
                fileUrls: null,
                toolCalls: null,
                thinking: null,
                snippet: '',
                isLimitReached: false,
                isOlderThan30Days: false,
            },
        ],
    },
    // needed?
    // {
    //     message: 'msg_userToolCall-Assistant-ToolCall',
    //     type: 'modelResponse',
    //     content: '',
    // },
    // {
    //     message: 'msg_userToolCall-Assistant-ToolCall',
    //     type: 'modelResponse',
    //     content: '\n\n',
    // },
    //
    // Begin user tool call chunks
    {
        message: 'msg_userToolCall-Assistant-ToolCall',
        toolCallId: USER_TOOL_CALL_ID,
        toolName: 'getWeather',
        args: null,
        type: 'toolCall',
        toolSource: 'user_defined',
    },
    {
        message: 'msg_userToolCall-Assistant-ToolCall',
        toolCallId: USER_TOOL_CALL_ID,
        toolName: '',
        args: '{"city": S',
        type: 'toolCall',
        toolSource: 'user_defined',
    },
    {
        message: 'msg_userToolCall-Assistant-ToolCall',
        toolCallId: USER_TOOL_CALL_ID,
        toolName: '',
        args: 'e',
        type: 'toolCall',
        toolSource: 'user_defined',
    },
    {
        message: 'msg_userToolCall-Assistant-ToolCall',
        toolCallId: USER_TOOL_CALL_ID,
        toolName: '',
        args: 'a',
        type: 'toolCall',
        toolSource: 'user_defined',
    },
    {
        message: 'msg_userToolCall-Assistant-ToolCall',
        toolCallId: USER_TOOL_CALL_ID,
        toolName: '',
        args: 't',
        type: 'toolCall',
        toolSource: 'user_defined',
    },
    {
        message: 'msg_userToolCall-Assistant-ToolCall',
        toolCallId: USER_TOOL_CALL_ID,
        toolName: '',
        args: 't',
        type: 'toolCall',
        toolSource: 'user_defined',
    },
    {
        message: 'msg_userToolCall-Assistant-ToolCall',
        toolCallId: USER_TOOL_CALL_ID,
        toolName: '',
        args: 'l',
        type: 'toolCall',
        toolSource: 'user_defined',
    },
    {
        message: 'msg_userToolCall-Assistant-ToolCall',
        toolCallId: USER_TOOL_CALL_ID,
        toolName: '',
        args: 'e',
        type: 'toolCall',
        toolSource: 'user_defined',
    },
    {
        message: 'msg_userToolCall-Assistant-ToolCall',
        toolCallId: USER_TOOL_CALL_ID,
        toolName: '',
        args: '"',
        type: 'toolCall',
        toolSource: 'user_defined',
    },
    {
        message: 'msg_userToolCall-Assistant-ToolCall',
        toolCallId: USER_TOOL_CALL_ID,
        toolName: '',
        args: '',
        type: 'toolCall',
        toolSource: 'user_defined',
    },
    {
        message: 'msg_userToolCall-Assistant-ToolCall',
        toolCallId: USER_TOOL_CALL_ID,
        toolName: '',
        args: '}',
        type: 'toolCall',
        toolSource: 'user_defined',
    },
    // END user tool call chunks
    {
        id: USER_TOOL_CALLS_THREAD_ROOT_ID,
        messages: [
            {
                id: USER_TOOL_CALLS_THREAD_ROOT_ID,
                content: 'What is the weather in Seattle?',
                creator: 'google-oauth2|106113864953374894702',
                role: 'user',
                opts: {
                    maxTokens: 2048,
                    temperature: 0.7,
                    n: 1,
                    topP: 1.0,
                    logprobs: null,
                    stop: [],
                },
                root: USER_TOOL_CALLS_THREAD_ROOT_ID,
                created: '2025-08-15T22:29:57.951706+00:00',
                modelId: 'qwen3-openai',
                modelHost: 'modal_openai',
                deleted: null,
                parent: null,
                template: null,
                children: ['msg_userToolCall-Assistant-ToolCall'],
                completion: null,
                final: true,
                original: null,
                private: false,
                modelType: null,
                finishReason: null,
                harmful: false,
                expirationTime: null,
                labels: [],
                fileUrls: [],
                toolCalls: null,
                toolDefinitions: [
                    {
                        toolName: 'getWeather',
                        description: 'gets the weather for a requested city',
                        parameters: {
                            type: 'object',
                            properties: {
                                city: {
                                    type: 'string',
                                },
                            },
                        },
                        toolSource: 'user_defined',
                    },
                ],
                thinking: null,
                snippet: 'What is the weather in Seattle?',
                isLimitReached: false,
                isOlderThan30Days: false,
            },
            {
                id: 'msg_userToolCall-Assistant-ToolCall',
                content: '',
                creator: 'google-oauth2|106113864953374894702',
                role: 'assistant',
                opts: {
                    maxTokens: 2048,
                    temperature: 0.7,
                    n: 1,
                    topP: 1.0,
                    logprobs: null,
                    stop: [],
                },
                root: USER_TOOL_CALLS_THREAD_ROOT_ID,
                created: '2025-08-15T22:29:57.973314+00:00',
                modelId: 'qwen3-openai',
                modelHost: 'modal_openai',
                deleted: null,
                parent: USER_TOOL_CALLS_THREAD_ROOT_ID,
                template: null,
                // children: ['msg_userToolCall-toolResult'],
                // we don't have children yet
                children: [],
                completion: 'cpl_I3M1H1V6P8',
                final: true,
                original: null,
                private: false,
                modelType: 'chat',
                finishReason: null,
                harmful: null,
                expirationTime: null,
                labels: [],
                fileUrls: null,
                toolCalls: [
                    {
                        toolName: 'getWeather',
                        args: '{"city": "Seattle"}',
                        toolCallId: USER_TOOL_CALL_ID,
                        toolSource: 'user_defined',
                    },
                ],
                thinking: null,
                snippet: '',
                isLimitReached: false,
                isOlderThan30Days: false,
            },
        ],
    },
    {
        type: 'end',
        message: USER_TOOL_CALLS_THREAD_ROOT_ID,
    },
] as const satisfies StreamingMessageResponse[];

// user sends with role: tool_result
// double check that these are correct root/messageID
export const userToolCallsStreamToolResponse = [
    {
        message: USER_TOOL_CALLS_RESPONSE_ID,
        type: 'start',
    },
    // return the whole user message
    {
        id: 'msg_userToolCall-toolResult',
        messages: [
            {
                id: 'msg_userToolCall-toolResult',
                content: 'rainy',
                creator: 'google-oauth2|106113864953374894702',
                role: 'tool_call_result',
                opts: {
                    maxTokens: 2048,
                    temperature: 0.7,
                    n: 1,
                    topP: 1.0,
                    logprobs: null,
                    stop: [],
                },
                root: USER_TOOL_CALLS_THREAD_ROOT_ID,
                created: '2025-08-15T22:30:06.023927+00:00',
                modelId: 'qwen3-openai',
                modelHost: 'modal_openai',
                deleted: null,
                // double check
                parent: 'msg_userToolCall-Assistant-ToolCall',
                template: null,
                children: ['msg_userToolCall-Assistant-Response'],
                completion: null,
                final: true,
                original: null,
                private: false,
                modelType: null,
                finishReason: null,
                harmful: false,
                expirationTime: null,
                labels: [],
                fileUrls: null,
                toolCalls: [
                    // return the tool with the response
                    {
                        toolName: 'getWeather',
                        args: '{"city": "Seattle"}',
                        toolCallId: USER_TOOL_CALL_ID,
                        toolSource: 'user_defined',
                    },
                ],
                thinking: null,
                snippet: 'rainy',
                isLimitReached: false,
                isOlderThan30Days: false,
            },

            // assistant response
            // this should maybe be `final: false` and stream
            {
                id: 'msg_userToolCall-Assistant-Response',
                content: 'The weather in Seattle is rainy',
                creator: 'google-oauth2|106113864953374894702',
                role: 'assistant',
                opts: {
                    maxTokens: 2048,
                    temperature: 0.7,
                    n: 1,
                    topP: 1.0,
                    logprobs: null,
                    stop: [],
                },
                root: USER_TOOL_CALLS_THREAD_ROOT_ID,
                created: '2025-08-15T22:30:06.035256+00:00',
                modelId: 'qwen3-openai',
                modelHost: 'modal_openai',
                deleted: null,
                parent: 'msg_userToolCall-toolResult',
                template: null,
                children: null,
                completion: null,
                final: true,
                original: null,
                private: false,
                modelType: 'chat',
                finishReason: null,
                harmful: null,
                expirationTime: null,
                labels: [],
                fileUrls: null,
                toolCalls: null,
                thinking: null,
                snippet: '',
                isLimitReached: false,
                isOlderThan30Days: false,
            },
        ],
    },
    {
        message: USER_TOOL_CALLS_RESPONSE_ID,
        type: 'end',
    },
] as const satisfies StreamingMessageResponse[];
